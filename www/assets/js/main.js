var App,ScrollTo,checkContentPos,clickHandler,currentNav,makeArticle,navs,resizeHandler,scrollToInit,update,wheelHandler,winObj,_ref,__hasProp={}.hasOwnProperty,__extends=function(e,n){function t(){this.constructor=e}for(var r in n)__hasProp.call(n,r)&&(e[r]=n[r]);return t.prototype=n.prototype,e.prototype=new t,e.__super__=n.prototype,e};App=function(e){function n(){return _ref=n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.routes={"/":"index","/<int:id>":"show"},n.prototype.index=function(){var e;return console.log("index"),e=$(".active"),e.length>0?e.removeClass("active"):void 0},n.prototype.show=function(e){var n,t;return console.log("show::"+e),n=$(".active"),n.length>0&&n.removeClass("active"),t=navs[e-1],$(t).find("a").addClass("active")},n}(Kazitori),winObj={WW:window.innerWidth,WH:window.innerHeight,SC_TOP:0},navs=[],currentNav=null,makeArticle=function(e){return $(".box").each(function(n){return $(this).css({height:e,top:e*n}),$(this).find("h1").css({"line-height":e+"px"})})},resizeHandler=function(){return winObj.WH=window.innerHeight,makeArticle(winObj.WH),$("#container").css({height:10*winObj.WH})},wheelHandler=function(){return checkContentPos()},checkContentPos=function(){var e;return winObj.SC_TOP=window.scrollY,e=Math.ceil(winObj.SC_TOP/winObj.WH),window.App.fragment!==e?window.App.replace("/"+e):void 0},clickHandler=function(e){var n;return e.preventDefault(),n=Number($(e.target).attr("href").replace("/","")),window.App.replace("/"+n),ScrollTo(n)},ScrollTo=function(e){var n,t;return n=(e-1)*winObj.WH+10,n=0>n?0:n,t=window.scrollY,new TWEEN.Tween({scrollTop:t}).to({scrollTop:n},400).easing(TWEEN.Easing.Quartic.Out).onUpdate(function(){return window.scroll(0,this.scrollTop)}).start()},update=function(){return requestAnimationFrame(update),TWEEN.update()},scrollToInit=function(){var e;return window.App.removeEventListener(KazitoriEvent.FIRST_REQUEST,scrollToInit),e=Number(window.App.fragment.replace("/","")),ScrollTo(e)},$(function(){var e,n;return n=window,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,window.requestAnimationFrame=e,navs=$("#navi").find("li"),n.App=new App({root:"/"}),n.App.addEventListener(KazitoriEvent.FIRST_REQUEST,scrollToInit),$(n).on("resize",resizeHandler),$(n).on("mousewheel",wheelHandler),$(".tgt").on("click",clickHandler),resizeHandler(),update()});